/*!
* Angular Directives For Accessible Applications
*
* Copyright (C) 2015 Deque Systems Inc., All Rights Reserved
*
* See the project LICENSE file for usage - https://github.com/dequelabs/ngA11y/blob/master/LICENSE
*/
!function(){"use strict";function a(a,b,c){for(var d=b.getAttribute("aria-describedby")||"",e=d,f=a.describedby||[],g=0,h=f.length;g<h;g++){var i=new RegExp("(?:^|\\s)"+f[g]+"(?!\\S)","g");d=d.replace(i,"")}if(a.describedby=[],c){var j=new RegExp("(?:^|\\s)"+c+"(?!\\S)");j.test(d)||(a.describedby.push(c),d+=" "+c)}d!==e&&b.setAttribute("aria-describedby",d)}function b(){return{restrict:"E",require:"?ngModel",link:function(a,b,c,d){d&&(d.focus=function(){b[0].focus()})}}}var c;try{c=angular.module("ngA11y")}catch(a){c=angular.module("ngA11y",[])}c.directive("nga11yValidation",["$timeout","nga11yAnnounce",function(b,c){return{require:"ngModel",link:function(d,e,f,g){function h(d){b(function(){var b=e[0];if(b&&(b.setAttribute("aria-invalid",g.$invalid),g.$invalid)){var h=d?d:"",i=f.nga11yValidationId;if(i){var j=document.getElementById(i);if(!j)return;angular.element(j).hasClass("ng-hide")?a(g,b):(h+=" "+j.innerText,a(g,b,i))}""!==h&&c.assertiveAnnounce(h)}},0)}var i,j=f.nga11yValidationDelay;d.debounce=j?parseInt(j,10):2e3,e.bind("blur",function(){i&&b.cancel(i),h("Previous field invalid.")}),g.$parsers.unshift(function(a){return i&&b.cancel(i),i=b(h,d.debounce),a})}}}]),c.directive("input",b),c.directive("textarea",b),c.directive("select",b),c.directive("nga11yForm",["$log",function(a){return{restrict:"A",link:function(b,c,d,e){if(!d.name)return void a.error("nga11yForm must have a name attribute");var f=b;b.focusFirst=function(a){var b=f[a];for(var c in b)if(b.hasOwnProperty(c)&&0!==c.indexOf("$")){var d=b[c];if(d.$invalid)return d.focus&&d.focus(),!0}return!1},c.on("submit",function(a){b.focusFirst(a.currentTarget.name)&&a.preventDefault()})}}}])}();